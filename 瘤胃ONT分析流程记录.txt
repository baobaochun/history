#数据到了，于晚上8点左右将数据从硬盘拷贝到新服务器上
#数据存放路径
/public/sequencing_data/Rumen_ONT

#readme.txt
数据使用者：李春晖
时间：2020/09/16
数据说明：文件夹WHWLZ-201911127D-01下的数据是奶牛瘤胃宏基因组单个样本的三代ONT和二代Illumina原始数据以及未来组在分析数据过程中产生的中间文件。

#数据拷贝完成，先验证传输数据是否完整，检验每一个.md5文件
cd /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/raw_data/genome/Nanopore/L3N/20190925-NPL1199-P1-PAE01409/PAE01409/qc_report
md5sum -c 20190925-NPL1199-P1-PAE01409.md5.txt
cd /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/raw_data/genome/Nanopore/L3N/20191011-NPL1199-P1-PAE03846/PAE03846/qc_report
md5sum -c 20191011-NPL1199-P1-PAE03846.md5.txt
cd /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/raw_data/genome/Nanopore/L3N/20191011-NPL1199-P1-PAE04012/PAE04012/qc_report
md5sum -c 20191011-NPL1199-P1-PAE04012.md5.txt
cd /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/raw_data/genome/Nanopore/L3N/20191011-NPL1199-P1-PAE05326/PAE05326/qc_report
md5sum -c 20191011-NPL1199-P1-PAE05326.md5.txt
cd /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/raw_data/genome/NGS/L3N
md5sum -c md5.txt

#查看每一项内容，具体的分析细节需要问未来组王年
#200G_NGS
/public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/downstream_analysis_result/03.Assembly/NGS/megahit.assembly.fasta
#200G_TGS
/public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/downstream_analysis_result/03.Assembly/TGS/1.pre_assembly/assembly.fasta
#45G_NGS
/public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/Comparison/NGS_vs_TGS/02.Assembly/NGS/megahit.assembly.fasta
#45G_TGS
/public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/Comparison/NGS_vs_TGS/02.Assembly/TGS/1.pre_assembly/assembly.fasta
#45G_merge
/public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/Comparison/NGS_vs_TGS/02.Assembly/Merged/assembly.fasta

#在新服务器上安装miniconda3
cd /public/home/lichunhui/software
wget -c https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
#激活conda环境
. /public/home/lichunhui/software/miniconda3/bin/activate
#关闭conda环境
conda deactivate
#在conda环境下激活metawrap环境
conda activate metawrap
#在conda环境下激活python3环境
conda activate python3

#使用quast对~200G的NGS和TGS组装数据进行评估
quast.py -o /public/home/lichunhui/project/rumen_ont/02_quast/NGS /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/downstream_analysis_result/03.Assembly/NGS/megahit.assembly.fasta
quast.py -o /public/home/lichunhui/project/rumen_ont/02_quast/TGS /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/downstream_analysis_result/03.Assembly/TGS/1.pre_assembly/assembly.fasta

#使用quast对~45G的NGS和TGS组装数据进行评估
quast.py -o /public/home/lichunhui/project/rumen_ont/02_quast/45G_NGS/ /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/Comparison/NGS_vs_TGS/02.Assembly/NGS/megahit.assembly.fasta
quast.py -o /public/home/lichunhui/project/rumen_ont/02_quast/45G_TGS/ /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/Comparison/NGS_vs_TGS/02.Assembly/TGS/1.pre_assembly/assembly.fasta
quast.py -o /public/home/lichunhui/project/rumen_ont/02_quast/merge/ /public/sequencing_data/Rumen_ONT/WHWLZ-201911127D-01/result/Comparison/NGS_vs_TGS/02.Assembly/Merged/assembly.fasta

#使用prodigal对~45G和~200G的二代和三代数据进行基因预测

#使用kraken2对~45G和~200G的二代和三代组装结果进行分类注释


#使用cd-hit对预测的基因去冗余
cd /public/home/lichunhui/project/rumen_ont/04_prodigal/TGS
cd-hit-est -i prodigal_tgs.orf.fasta -o cdhit_tgs.orf.fasta -n 9 -g 1 -c 0.95 -G 0 -M 0 -d 0 -aS 0.9 -T 20

cd /public/home/lichunhui/project/rumen_ont/04_prodigal/NGS
cd-hit-est -i prodigal_ngs.orf.fasta -o cdhit_ngs.orf.fasta -n 9 -g 1 -c 0.95 -G 0 -M 0 -d 0 -aS 0.9 -T 20

cd /public/home/lichunhui/project/rumen_ont/04_prodigal/merge
cd-hit-est -i prodigal_merge.orf.fasta -o cdhit_merge.orf.fasta -n 9 -g 1 -c 0.95 -G 0 -M 0 -d 0 -aS 0.9 -T 20

#使用diamond在nr数据库中进行基因注释
qsub /public/home/lichunhui/project/rumen_ont/script/diamond_nr.sh